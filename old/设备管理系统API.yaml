openapi: 3.0.0
info:
  title: DA04部門設備管理システム API
  description: DA04部門内機器管理システムのOpenAPI仕様
  version: 2.2.0
  contact:
    name: 設備管理APIサポート
    email: equip-support@example.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.example.com/v1
    description: 本番サーバー
  - url: https://staging-api.example.com/v1
    description: ステージングサーバー

tags:
  - name: 認証管理
    description: ユーザー認証とセッション管理
  - name: ユーザー管理
    description: ユーザーアカウントと権限管理
  - name: 設備管理
    description: 設備資産の管理操作
  - name: 権限管理
    description: 設備使用権限リスト管理
  - name: 検査管理
    description: 月次点検と現場検査管理
  - name: ファイル入出力
    description: Excelファイルインポート/エクスポート操作

paths:
  # 認証管理モジュール
  /auth/login:
    post:
      tags:
        - 認証管理
      summary: ユーザーログイン
      description: 社員番号とパスワードでアクセストークンを取得
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLoginRequest"
      responses:
        "200":
          description: ログイン成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"
        "401":
          description: 認証失敗
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /auth/refresh:
    post:
      tags:
        - 認証管理
      summary: トークン更新
      description: リフレッシュトークンを使用して新しいアクセストークンを取得
      operationId: refreshToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refreshToken:
                  type: string
      responses:
        "200":
          description: トークン更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"
        "401":
          description: 無効なリフレッシュトークン

  /auth/password/change:
    post:
      tags:
        - 認証管理
      summary: パスワード変更
      description: ログインユーザーのパスワードを変更
      operationId: changePassword
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangePasswordRequest"
      responses:
        "200":
          description: パスワード変更成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          description: 無効なリクエスト
        "401":
          description: 認証失敗

  # ユーザー管理モジュール
  /users:
    get:
      tags:
        - ユーザー管理
      summary: ユーザーリスト取得
      description: システムユーザーのリストを取得（管理者権限必要）
      operationId: getUsers
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
        - name: deptId
          in: query
          description: 部署IDでフィルタリング
          required: false
          schema:
            type: string
        - name: userType
          in: query
          description: ユーザータイプでフィルタリング
          required: false
          schema:
            type: string
            enum: [ADMIN, USER]
        - name: search
          in: query
          description: 検索キーワード（社員番号、氏名）
          required: false
          schema:
            type: string
      responses:
        "200":
          description: ユーザーリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
                  pagination:
                    $ref: "#/components/schemas/Pagination"

    post:
      tags:
        - ユーザー管理
      summary: 新規ユーザー登録
      description: 新規ユーザーを登録（管理者権限必要）
      operationId: createUser
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserRequest"
      responses:
        "201":
          description: ユーザー登録成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: 無効なリクエスト
        "403":
          description: 権限不足

  /users/{userId}:
    get:
      tags:
        - ユーザー管理
      summary: ユーザー詳細取得
      description: ユーザーIDに基づきユーザー詳細情報を取得
      operationId: getUserById
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          description: ユーザーID
          schema:
            type: integer
      responses:
        "200":
          description: ユーザー詳細取得成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserDetail"
        "404":
          description: ユーザーが存在しません

    put:
      tags:
        - ユーザー管理
      summary: ユーザー情報更新
      description: ユーザー情報を更新（管理者権限必要）
      operationId: updateUser
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserRequest"
      responses:
        "200":
          description: ユーザー更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "403":
          description: 権限不足
        "404":
          description: ユーザーが存在しません

    delete:
      tags:
        - ユーザー管理
      summary: ユーザー削除
      description: システムからユーザーを削除（管理者権限必要）
      operationId: deleteUser
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
      responses:
        "204":
          description: ユーザー削除成功
        "403":
          description: 権限不足
        "404":
          description: ユーザーが存在しません

  /users/{userId}/roles:
    put:
      tags:
        - ユーザー管理
      summary: ユーザーロール設定
      description: ユーザーにロールを設定（管理者権限必要）
      operationId: setUserRoles
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                roleIds:
                  type: array
                  items:
                    type: integer
      responses:
        "200":
          description: ロール設定成功
        "403":
          description: 権限不足
        "404":
          description: ユーザーが存在しません

  # 設備管理モジュール
  /devices:
    get:
      tags:
        - 設備管理
      summary: 設備リスト取得
      description: DA04部門の全設備リストを取得
      operationId: getDevices
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
        - name: department
          in: query
          description: 部門でフィルタリング
          required: false
          schema:
            type: string
        - name: project
          in: query
          description: プロジェクトでフィルタリング
          required: false
          schema:
            type: string
        - name: devRoom
          in: query
          description: 開発室でフィルタリング
          required: false
          schema:
            type: string
        - name: search
          in: query
          description: 検索キーワード（機器番号、コンピュータ名）
          required: false
          schema:
            type: string
      responses:
        "200":
          description: 設備リスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Device"
                  pagination:
                    $ref: "#/components/schemas/Pagination"

    post:
      tags:
        - 設備管理
      summary: 新規設備追加
      description: システムに新規設備を追加（管理者権限必要）
      operationId: createDevice
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDeviceRequest"
      responses:
        "201":
          description: 設備追加成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Device"
        "400":
          description: 無効なリクエストデータ
        "403":
          description: 権限不足

  /devices/{deviceId}:
    get:
      tags:
        - 設備管理
      summary: 設備詳細取得
      description: 設備IDに基づき設備詳細情報を取得
      operationId: getDeviceById
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          description: 設備ID
          schema:
            type: string
      responses:
        "200":
          description: 設備詳細取得成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeviceDetail"
        "404":
          description: 設備が存在しません

    put:
      tags:
        - 設備管理
      summary: 設備情報更新
      description: 設備情報を更新（管理者権限必要）
      operationId: updateDevice
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateDeviceRequest"
      responses:
        "200":
          description: 設備更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Device"
        "403":
          description: 権限不足
        "404":
          description: 設備が存在しません

    delete:
      tags:
        - 設備管理
      summary: 設備削除
      description: システムから設備を削除（管理者権限必要）
      operationId: deleteDevice
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      responses:
        "204":
          description: 設備削除成功
        "403":
          description: 権限不足
        "404":
          description: 設備が存在しません

  /devices/{deviceId}/ips:
    get:
      tags:
        - 設備管理
      summary: 設備IPリスト取得
      description: 設備に紐づくIPアドレスリストを取得
      operationId: getDeviceIps
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: IPリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/DeviceIp"

    post:
      tags:
        - 設備管理
      summary: 設備IP追加
      description: 設備にIPアドレスを追加（管理者権限必要）
      operationId: addDeviceIp
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ipAddress:
                  type: string
                  example: "192.168.1.100"
      responses:
        "201":
          description: IP追加成功
        "400":
          description: 無効なIPアドレス
        "403":
          description: 権限不足

  /devices/{deviceId}/monitors:
    get:
      tags:
        - 設備管理
      summary: 設備モニターリスト取得
      description: 設備に紐づくモニター情報を取得
      operationId: getDeviceMonitors
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: モニターリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/MonitorInfo"

  # 権限管理モジュール
  /devices/{deviceId}/permissions:
    get:
      tags:
        - 権限管理
      summary: 設備権限情報取得
      description: 設備の使用権限情報を取得
      operationId: getDevicePermissions
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 権限情報取得成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DevicePermission"

    put:
      tags:
        - 権限管理
      summary: 設備権限情報更新
      description: 設備の使用権限情報を更新（管理者権限必要）
      operationId: updateDevicePermissions
      security:
        - bearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateDevicePermissionRequest"
      responses:
        "200":
          description: 権限情報更新成功
        "403":
          description: 権限不足
        "404":
          description: 設備が存在しません

  /permissions/inventory:
    get:
      tags:
        - 権限管理
      summary: 権限インベントリ取得
      description: 全設備の権限インベントリリストを取得
      operationId: getPermissionInventory
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
      responses:
        "200":
          description: 権限インベントリ取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/PermissionInventory"
                  pagination:
                    $ref: "#/components/schemas/Pagination"

  # 検査管理モジュール
  /monthly-reports:
    get:
      tags:
        - 検査管理
      summary: 月次点検レポートリスト取得
      description: 月次点検レポートのリストを取得
      operationId: getMonthlyReports
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
        - name: yearMonth
          in: query
          description: 年月でフィルタリング (YYYY-MM)
          required: false
          schema:
            type: string
        - name: deptId
          in: query
          description: 部署IDでフィルタリング
          required: false
          schema:
            type: string
      responses:
        "200":
          description: レポートリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/MonthlyCheckReport"
                  pagination:
                    $ref: "#/components/schemas/Pagination"

    post:
      tags:
        - 検査管理
      summary: 月次点検レポート作成
      description: 新規月次点検レポートを作成（管理者権限必要）
      operationId: createMonthlyReport
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMonthlyReportRequest"
      responses:
        "201":
          description: レポート作成成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyCheckReport"
        "403":
          description: 権限不足

  /monthly-reports/{reportId}:
    get:
      tags:
        - 検査管理
      summary: 月次点検レポート詳細取得
      description: 月次点検レポートの詳細情報を取得
      operationId: getMonthlyReportById
      security:
        - bearerAuth: []
      parameters:
        - name: reportId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: レポート詳細取得成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyCheckReportDetail"

  /sampling-checks:
    get:
      tags:
        - 検査管理
      summary: 抜取り点検リスト取得
      description: 抜取り点検記録のリストを取得
      operationId: getSamplingChecks
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
        - name: reportId
          in: query
          description: レポートIDでフィルタリング
          required: false
          schema:
            type: string
      responses:
        "200":
          description: 抜取り点検リスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/SamplingCheck"
                  pagination:
                    $ref: "#/components/schemas/Pagination"

    post:
      tags:
        - 検査管理
      summary: 抜取り点検記録作成
      description: 新規抜取り点検記録を作成（検査者権限必要）
      operationId: createSamplingCheck
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateSamplingCheckRequest"
      responses:
        "201":
          description: 点検記録作成成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SamplingCheck"

  /non-sampling-checks:
    get:
      tags:
        - 検査管理
      summary: 非抜取り点検リスト取得
      description: 非抜取り点検記録のリストを取得
      operationId: getNonSamplingChecks
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
        - name: reportId
          in: query
          description: レポートIDでフィルタリング
          required: false
          schema:
            type: string
      responses:
        "200":
          description: 非抜取り点検リスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/NonSamplingCheck"
                  pagination:
                    $ref: "#/components/schemas/Pagination"

    post:
      tags:
        - 検査管理
      summary: 非抜取り点検記録作成
      description: 新規非抜取り点検記録を作成（検査者権限必要）
      operationId: createNonSamplingCheck
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateNonSamplingCheckRequest"
      responses:
        "201":
          description: 点検記録作成成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NonSamplingCheck"

  # ファイル入出力モジュール
  /import/devices:
    post:
      tags:
        - ファイル入出力
      summary: 設備リストインポート
      description: Excelファイルで設備リストをインポート（管理者権限必要）
      operationId: importDeviceList
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Excelファイル（設備リスト.xlsx）
                overwrite:
                  type: boolean
                  description: 既存データを上書きするか
                  default: false
      responses:
        "200":
          description: ファイルインポート成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  importedCount:
                    type: integer
                    example: 50
                  updatedCount:
                    type: integer
                    example: 10
                  errors:
                    type: array
                    items:
                      type: string

  /export/permission-inventory:
    get:
      tags:
        - ファイル入出力
        - 権限管理
      summary: 設備使用権限リストエクスポート
      description: ISMSFM0502-1設備使用権限リストExcelファイルをエクスポート
      operationId: exportPermissionInventory
      security:
        - bearerAuth: []
      parameters:
        - name: template
          in: query
          description: テンプレートファイルをダウンロードするか
          required: false
          schema:
            type: boolean
            default: false
      responses:
        "200":
          description: Excelファイルダウンロード
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary

  /export/monthly-report:
    get:
      tags:
        - ファイル入出力
        - 検査管理
      summary: 月次点検レポートエクスポート
      description: 月次点検レポートをExcelファイルでエクスポート
      operationId: exportMonthlyReport
      security:
        - bearerAuth: []
      parameters:
        - name: reportId
          in: query
          description: レポートID
          required: true
          schema:
            type: string
        - name: template
          in: query
          description: テンプレートファイルをダウンロードするか
          required: false
          schema:
            type: boolean
            default: false
      responses:
        "200":
          description: Excelファイルダウンロード
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary

components:
  # 安全方案定义
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    PageParam:
      name: page
      in: query
      description: ページ番号
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1
        example: 1
    LimitParam:
      name: limit
      in: query
      description: 1ページあたりのアイテム数
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
        example: 20

  schemas:
    # 認証管理スキーマ
    UserLoginRequest:
      type: object
      required:
        - jobNumber
        - password
      properties:
        jobNumber:
          type: string
          description: 社員番号
          example: "EMP001"
        password:
          type: string
          format: password
          description: パスワード
          example: "userpassword"

    ChangePasswordRequest:
      type: object
      required:
        - currentPassword
        - newPassword
        - confirmPassword
      properties:
        currentPassword:
          type: string
          format: password
          description: 現在のパスワード
        newPassword:
          type: string
          format: password
          description: 新しいパスワード
        confirmPassword:
          type: string
          format: password
          description: 新しいパスワード（確認）

    AuthResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: アクセストークン
        refreshToken:
          type: string
          description: リフレッシュトークン
        tokenType:
          type: string
          example: "Bearer"
        expiresIn:
          type: integer
          example: 3600
        user:
          $ref: "#/components/schemas/User"

    # 共通スキーマ
    Pagination:
      type: object
      properties:
        page:
          type: integer
          description: 現在のページ番号
        limit:
          type: integer
          description: 1ページあたりのアイテム数
        total:
          type: integer
          description: 総アイテム数
        pages:
          type: integer
          description: 総ページ数

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "操作が成功しました"

    Error:
      type: object
      properties:
        error:
          type: string
          description: エラータイプ
        message:
          type: string
          description: エラーメッセージ
        details:
          type: object
          description: 詳細情報

    # ユーザー管理スキーマ
    User:
      type: object
      properties:
        userId:
          type: integer
          example: 1
        deptId:
          type: string
          description: 部署番号
          example: "DEPT001"
        name:
          type: string
          description: 氏名
          example: "张三"
        jobNumber:
          type: string
          description: 社員番号
          example: "EMP001"
        userType:
          type: string
          description: ユーザータイプ
          enum: [ADMIN, USER]
          example: "ADMIN"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    UserDetail:
      allOf:
        - $ref: "#/components/schemas/User"
        - type: object
          properties:
            roles:
              type: array
              items:
                $ref: "#/components/schemas/Role"
            permissions:
              type: array
              items:
                $ref: "#/components/schemas/Permission"
            assignedDevices:
              type: array
              items:
                $ref: "#/components/schemas/Device"
              description: 割当て済み設備

    CreateUserRequest:
      type: object
      required:
        - deptId
        - name
        - jobNumber
        - password
        - userTypeId
      properties:
        deptId:
          type: string
          example: "DEPT001"
        name:
          type: string
          example: "张三"
        jobNumber:
          type: string
          example: "EMP001"
        password:
          type: string
          format: password
          example: "password123"
        userTypeId:
          type: integer
          description: ユーザータイプID
          example: 1

    UpdateUserRequest:
      type: object
      properties:
        deptId:
          type: string
          example: "DEPT001"
        name:
          type: string
          example: "张三"
        userTypeId:
          type: integer
          example: 1

    # ロールと権限スキーマ
    Role:
      type: object
      properties:
        roleId:
          type: integer
          example: 1
        roleName:
          type: string
          example: "システム管理者"
        roleCode:
          type: string
          example: "ROLE_ADMIN"
        description:
          type: string
          example: "システムの全権限を保有"

    Permission:
      type: object
      properties:
        permissionId:
          type: integer
          example: 1
        permissionName:
          type: string
          example: "ユーザー参照"
        permissionCode:
          type: string
          example: "PERM_VIEW_USER"
        resourceType:
          type: string
          example: "メニュー"
        resourceKey:
          type: string
          example: "/user/list"

    # 設備管理スキーマ
    Device:
      type: object
      properties:
        deviceId:
          type: string
          example: "DEV001"
        deviceModel:
          type: string
          example: "Dell XPS"
        computerName:
          type: string
          example: "PC-DELL-001"
        loginUsername:
          type: string
          example: "zhangsan"
        project:
          type: string
          example: "Project A"
        devRoom:
          type: string
          example: "Room101"
        jobNumber:
          type: string
          example: "EMP001"
        os:
          $ref: "#/components/schemas/DictItem"
        memory:
          $ref: "#/components/schemas/DictItem"
        ssd:
          $ref: "#/components/schemas/DictItem"
        hdd:
          $ref: "#/components/schemas/DictItem"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    DeviceDetail:
      allOf:
        - $ref: "#/components/schemas/Device"
        - type: object
          properties:
            ips:
              type: array
              items:
                $ref: "#/components/schemas/DeviceIp"
            monitors:
              type: array
              items:
                $ref: "#/components/schemas/MonitorInfo"
            permissions:
              $ref: "#/components/schemas/DevicePermission"
            user:
              $ref: "#/components/schemas/User"

    CreateDeviceRequest:
      type: object
      required:
        - deviceId
        - deviceModel
        - computerName
        - jobNumber
      properties:
        deviceId:
          type: string
          example: "DEV001"
        deviceModel:
          type: string
          example: "Dell XPS"
        computerName:
          type: string
          example: "PC-DELL-001"
        loginUsername:
          type: string
          example: "zhangsan"
        project:
          type: string
          example: "Project A"
        devRoom:
          type: string
          example: "Room101"
        jobNumber:
          type: string
          example: "EMP001"
        osId:
          type: integer
          example: 2
        memoryId:
          type: integer
          example: 2
        ssdId:
          type: integer
          example: 1
        hddId:
          type: integer
          example: 1

    UpdateDeviceRequest:
      type: object
      properties:
        deviceModel:
          type: string
          example: "Dell XPS"
        computerName:
          type: string
          example: "PC-DELL-001"
        loginUsername:
          type: string
          example: "zhangsan"
        project:
          type: string
          example: "Project A"
        devRoom:
          type: string
          example: "Room101"
        jobNumber:
          type: string
          example: "EMP001"
        osId:
          type: integer
          example: 2
        memoryId:
          type: integer
          example: 2
        ssdId:
          type: integer
          example: 1
        hddId:
          type: integer
          example: 1

    DeviceIp:
      type: object
      properties:
        ipId:
          type: string
          example: "IP001"
        deviceId:
          type: string
          example: "DEV001"
        ipAddress:
          type: string
          example: "192.168.1.101"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    MonitorInfo:
      type: object
      properties:
        monitorId:
          type: string
          example: "MON001"
        deviceId:
          type: string
          example: "DEV001"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # 権限管理スキーマ
    DevicePermission:
      type: object
      properties:
        permissionId:
          type: string
          example: "PERM_DEV001"
        jobNumber:
          type: string
          example: "EMP001"
        domainStatus:
          $ref: "#/components/schemas/DictItem"
        domainGroup:
          type: string
          example: "Domain Users"
        smartitStatus:
          $ref: "#/components/schemas/DictItem"
        usbStatus:
          $ref: "#/components/schemas/DictItem"
        usbExpireDate:
          type: string
          format: date
        antivirusStatus:
          $ref: "#/components/schemas/DictItem"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    UpdateDevicePermissionRequest:
      type: object
      properties:
        domainStatusId:
          type: integer
          example: 7
        domainGroup:
          type: string
          example: "Domain Users"
        smartitStatusId:
          type: integer
          example: 9
        usbStatusId:
          type: integer
          example: 11
        usbExpireDate:
          type: string
          format: date
        antivirusStatusId:
          type: integer
          example: 13

    PermissionInventory:
      type: object
      properties:
        deviceId:
          type: string
          example: "DEV001"
        computerName:
          type: string
          example: "PC-DELL-001"
        jobNumber:
          type: string
          example: "EMP001"
        userName:
          type: string
          example: "张三"
        domainStatus:
          type: string
          example: "加入済"
        smartitStatus:
          type: string
          example: "インストール済"
        usbStatus:
          type: string
          example: "有効化済"
        antivirusStatus:
          type: string
          example: "インストール済"

    # 検査管理スキーマ
    MonthlyCheckReport:
      type: object
      properties:
        reportId:
          type: string
          example: "REPORT001"
        updateDate:
          type: string
          format: date
          example: "2025-12-01"
        securityPromoter:
          type: string
          example: "王五"
        securityResponsible:
          type: string
          example: "赵六"
        qualityDept:
          type: string
          example: "品質部"
        workArea:
          type: string
          example: "AreaA"
        deptId:
          type: string
          example: "DEPT001"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    MonthlyCheckReportDetail:
      allOf:
        - $ref: "#/components/schemas/MonthlyCheckReport"
        - type: object
          properties:
            samplingChecks:
              type: array
              items:
                $ref: "#/components/schemas/SamplingCheck"
            nonSamplingChecks:
              type: array
              items:
                $ref: "#/components/schemas/NonSamplingCheck"

    CreateMonthlyReportRequest:
      type: object
      required:
        - updateDate
        - securityPromoter
        - securityResponsible
      properties:
        updateDate:
          type: string
          format: date
          example: "2025-12-01"
        securityPromoter:
          type: string
          example: "王五"
        securityResponsible:
          type: string
          example: "赵六"
        qualityDept:
          type: string
          example: "品質部"
        workArea:
          type: string
          example: "AreaA"
        deptId:
          type: string
          example: "DEPT001"

    SamplingCheck:
      type: object
      properties:
        samplingId:
          type: string
          example: "SC001"
        reportId:
          type: string
          example: "REPORT001"
        jobNumber:
          type: string
          example: "EMP001"
        deviceId:
          type: string
          example: "DEV001"
        name:
          type: string
          example: "张三"
        screenSaverPwd:
          $ref: "#/components/schemas/DictItem"
        usbInterface:
          $ref: "#/components/schemas/DictItem"
        securityPatch:
          $ref: "#/components/schemas/DictItem"
        antivirusProtection:
          $ref: "#/components/schemas/DictItem"
        bootAuthentication:
          $ref: "#/components/schemas/DictItem"
        installedSoftware:
          type: string
          example: "Office 365, VS Code"
        disposalMeasures:
          type: string
          example: "問題なし"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateSamplingCheckRequest:
      type: object
      required:
        - reportId
        - jobNumber
        - deviceId
        - name
      properties:
        reportId:
          type: string
          example: "REPORT001"
        jobNumber:
          type: string
          example: "EMP001"
        deviceId:
          type: string
          example: "DEV001"
        name:
          type: string
          example: "张三"
        screenSaverPwdId:
          type: integer
          example: 1
        usbInterfaceId:
          type: integer
          example: 1
        securityPatchId:
          type: integer
          example: 1
        antivirusProtectionId:
          type: integer
          example: 1
        bootAuthenticationId:
          type: integer
          example: 2
        installedSoftware:
          type: string
          example: "Office 365, VS Code"
        disposalMeasures:
          type: string
          example: "問題なし"

    NonSamplingCheck:
      type: object
      properties:
        nonSamplingId:
          type: string
          example: "NSC001"
        reportId:
          type: string
          example: "REPORT001"
        privateMobileDev:
          $ref: "#/components/schemas/DictItem"
        unrecordedWifi:
          $ref: "#/components/schemas/DictItem"
        floorAccessClosed:
          $ref: "#/components/schemas/DictItem"
        publicMobileDevOut:
          $ref: "#/components/schemas/DictItem"
        icCardWorn:
          $ref: "#/components/schemas/DictItem"
        copierNoDoc:
          $ref: "#/components/schemas/DictItem"
        printerNoDoc:
          $ref: "#/components/schemas/DictItem"
        noIdleDevice:
          $ref: "#/components/schemas/DictItem"
        deskNoDoc:
          $ref: "#/components/schemas/DictItem"
        disposalMeasures:
          type: string
          example: "対応済み"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateNonSamplingCheckRequest:
      type: object
      required:
        - reportId
      properties:
        reportId:
          type: string
          example: "REPORT001"
        privateMobileDevId:
          type: integer
          example: 1
        unrecordedWifiId:
          type: integer
          example: 1
        floorAccessClosedId:
          type: integer
          example: 1
        publicMobileDevOutId:
          type: integer
          example: 1
        icCardWornId:
          type: integer
          example: 1
        copierNoDocId:
          type: integer
          example: 1
        printerNoDocId:
          type: integer
          example: 1
        noIdleDeviceId:
          type: integer
          example: 1
        deskNoDocId:
          type: integer
          example: 1
        disposalMeasures:
          type: string
          example: "対応済み"

    # システム管理スキーマ
    DictType:
      type: object
      properties:
        dictTypeId:
          type: integer
          example: 1
        dictTypeCode:
          type: string
          example: "USER_TYPE"
        dictTypeName:
          type: string
          example: "ユーザータイプ"
        description:
          type: string
          example: "異なるタイプのユーザーを区別"
        isEnabled:
          type: boolean
          example: true

    DictItem:
      type: object
      properties:
        dictItemId:
          type: integer
          example: 1
        dictTypeId:
          type: integer
          example: 1
        dictItemCode:
          type: string
          example: "ADMIN"
        dictItemName:
          type: string
          example: "管理者"
        sort:
          type: integer
          example: 1
        isEnabled:
          type: boolean
          example: true